# План проекта: Маркетплейс (аналог Wildberries)

## Обзор
Веб-платформа маркетплейса с тремя ролями: Продавец, Покупатель, Модератор. Фронтенд на React, бэкенд на Java. Платежи через Юкассу. Своя логистика и склады.

## Цели
- Обеспечить полнофункциональный маркетплейс для продавцов и покупателей.
- Обеспечить модерацию контента и споров.
- Гарантировать время отклика не более 1 секунды для ключевых операций.

## Роли и функциональность
### Продавец
- Создание товара и загрузка фото.
- Управление ценой, временными скидками, количеством товара.
- Выбор категории, бренда, вариантов (цвет/размер), характеристик для техники.
- Просмотр метрик: просмотры, позиция в поиске, конверсия, статистика покупок с детализацией по времени.
- Публикация первого товара только после подтверждения модератором.

### Покупатель
- Поиск товаров, фильтры, автодополнение.
- Просмотр товара, комментариев и отзывов.
- Возможность оставить отзыв только после покупки.
- Личный кабинет: заказы, корзина, избранное, история покупок.
- Рекомендации товаров под клиента.

### Модератор
- Модерация комментариев и споров.
- Блокировка продавца, покупателя, товара с указанием причины.
- Обработка жалоб на товары.
- Модерация первого товара продавца.

## Поиск и каталог
- Полнотекстовый поиск с опечатками (пример: "кросовки" → "кроссовки", "айфон" → "iphone").
- Автодополнение: популярные запросы, категории, бренды.
- Каталог с категориями, брендами, вариантами (цвет/размер) и характеристиками для техники.

## Оплата и финансы
- Единственный провайдер: Юкасса.
- Комиссия платформы: 5% от суммы заказа.
- Продавец получает 100% суммы товара, комиссия списывается отдельно.

## Доставка и возвраты
- Логистика: своя.
- Возвраты доступны при повреждении товара или неправильной поставке.

## Уведомления
- Каналы: email и веб-уведомления.

## Нефункциональные требования
- Высокие требования к безопасности.
- Время отклика: не более 1 секунды для ключевых операций.
- Масштаб: ~10k заказов в день, много продавцов и пользователей.
- RPO: 15 минут, RTO: 1 час.

## Архитектурные решения (черновик)
- Веб-клиент: React.
- Бэкенд: Java (конкретные фреймворки/библиотеки уточнить).
- Платежи: интеграция с Юкассой.
- Update 2026-01-17: Аутентификация на JWT + refresh token.
- Update 2026-01-17: База данных PostgreSQL.
- Update 2026-01-17: Поиск: Elasticsearch (поддержка опечаток и автодополнения).
- Update 2026-01-17: Кеширование: Redis.
- Update 2026-01-17: Хранилище медиа: локальное.
- Update 2026-01-17: Событийная шина/очередь: Kafka.
- Update 2026-01-17: Оркестрация окружения: Docker Compose.
- Update 2026-01-17: Доставка с обязательными статусами.
- Мониторинг и логирование: определить стек.

## Риски
- 1 секунда отклика при полном тексте и автодополнении потребует продуманной архитектуры поиска и кеширования.
- Масштаб 10k заказов/день требует устойчивой очереди и надежной обработки платежей.
- Модерация и жалобы могут создать операционную нагрузку.

## Открытые вопросы
- ~~Какая модель аутентификации/авторизации (например, JWT/сессии), и нужны ли роли с fine-grained правами?~~
  - Update 2026-01-17: JWT + refresh token, роли только базовые.
- ~~Какая база данных (PostgreSQL/MySQL), нужен ли отдельный поисковый движок?~~
  - Update 2026-01-17: PostgreSQL + Elasticsearch, Redis для кеша.
- ~~Где хранить медиа: локально, объектное хранилище, CDN?~~
  - Update 2026-01-17: локальное хранилище.
- ~~Нужна ли поддержка очередей/шины событий (например, для платежей, уведомлений, логистики)?~~
  - Update 2026-01-17: Kafka.
- ~~Требуется ли SLA для логистики и трекинг статусов доставки?~~
  - Update 2026-01-17: статусные треки обязательны.
- ~~Нужны ли требования к резервному копированию и RPO/RTO?~~
  - Update 2026-01-17: RPO 15 минут, RTO 1 час.
